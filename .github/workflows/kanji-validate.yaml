name: Validación de ficheros de kanji

on:
  pull_request:
  workflow_dispatch:

env:
  DATA_DIR: data
  META_DIR: meta-data
  KANA_DIR: kanas
  YOMI_DIR: yomi
  KANJI_HINT_DIR: lexicon/hints-kanji
  PROFILES_DIR: profiles
jobs:

  validar:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - run: npm install js-yaml ajv
      - name: validar contra esquema
        uses: actions/github-script@v4
        with:
          script: |
            require('.github/validar-schema.js')
      - name: Validate No PNGs Remain in Docs Folder
        run: |
          if ls docs/assets/historias/*.png 1> /dev/null 2>&1; then
            echo "❌ ERROR: PNG files are present in the documentation folder (docs/assets/historias/)."
            echo "All assets in this folder must be optimized JPGs."
            
            echo "Found files:"
            ls docs/assets/historias/*.png
            
            exit 1 
          else
            echo "✅ Validation successful: No .png files found in docs/assets/historias/."
          fi
